<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.loli.net/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|consolas:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.zoutl.cn","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"apiKey":"079e96e1d3e15e7f2f512596bf590eac","indexName":"hexo_blog","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":6,"unescape":true,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="LeDao&#39;s Blog">
<meta property="og:url" content="https://blog.zoutl.cn/page/43/index.html">
<meta property="og:site_name" content="LeDao&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="LeDao">
<meta property="article:tag" content="LeDao的博客,Java,idea使用,个人项目,Tomcat,MySQL,GitHub,前端,MyBatis,MyBatis-Plus,CentOS7,Redis,Vue.js">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://blog.zoutl.cn/page/43/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>LeDao's Blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?112c188c9864ee3c98ba7e2495734acf";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="LeDao's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">LeDao's Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-主页">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>主页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-项目">

    <a href="/project/" rel="section"><i class="fa fa-paw fa-fw"></i>项目</a>

  </li>
        <li class="menu-item menu-item-友链">

    <a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    

  <a href="https://github.com/a6678696" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener external nofollow noreferrer" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.zoutl.cn/170.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image.zoutl.cn/hexo-blog/images/logo.png">
      <meta itemprop="name" content="LeDao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeDao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/170.html" class="post-title-link" itemprop="url">Redis有序集合(sorted set)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-21 09:39:57" itemprop="dateCreated datePublished" datetime="2021-06-21T09:39:57+08:00">2021-06-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-26 04:00:44" itemprop="dateModified" datetime="2022-04-26T04:00:44+08:00">2022-04-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>Redis 有序集合和集合一样也是 string 类型元素的集合,且不允许重复的成员。</p>
<p>不同的是每个元素都会关联一个 double 类型的分数。redis 正是通过分数来为集合中的成员进行从小到大的排序。</p>
<p>有序集合的成员是唯一的,但分数(score)却可以重复。</p>
<p>集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)。 集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。</p>
<h3 id="zadd"><a href="#zadd" class="headerlink" title="zadd"></a>zadd</h3><p>添加元素，里面包括年龄和名称，根据数值从小到大排列，如果继续添加元素：①值已存在，则数值覆盖②值不存在，就会添加进去</p>
<p><font color="#dd0000">zadd key 数值1 字段1 数值2 字段2 …</font></p>
<p>127.0.0.1:6379&gt; <code>zadd age 11 tom 8 jack 22 mary</code><br>(integer) 3</p>
<h3 id="zrange"><a href="#zrange" class="headerlink" title="zrange"></a>zrange</h3><h4 id="查找元素"><a href="#查找元素" class="headerlink" title="查找元素"></a>查找元素</h4><p>位置下标从0开始，结束位置如果是-1代表是最后一个</p>
<p><font color="#dd0000">zrange key start end</font></p>
<p>127.0.0.1:6379&gt; <code>zrange age 0 -1</code><br>1)”jack”<br>2)”tom”<br>3)”mary”</p>
<h4 id="显示数值"><a href="#显示数值" class="headerlink" title="显示数值"></a>显示数值</h4><p>上面没有显示数值，命令后面加上withscores可以显示数值</p>
<p><font color="#dd0000">zrange key 0 -1 withscores</font></p>
<p>127.0.0.1:6379&gt; <code>zrange age 0 -1 withscores</code><br>1)”jack”<br>2)”8”<br>3)”tom”<br>4)”11”<br>5)”mary”<br>6)”22”</p>
<h3 id="zrevrange"><a href="#zrevrange" class="headerlink" title="zrevrange"></a>zrevrange</h3><p>降序排列，和zrange相反</p>
<p><font color="#dd0000">zrevrange key start end withscores</font></p>
<p>127.0.0.1:6379&gt; <code>zrevrange age 0 -1 withscores</code><br>1)”mary”<br>2)”22”<br>3)”tom”<br>4)”11”<br>5)”jack”<br>6)”8”</p>
<h3 id="zrem"><a href="#zrem" class="headerlink" title="zrem"></a>zrem</h3><p>删除一个或多个元素</p>
<p><font color="#dd0000">zrem key 字段1 字段2 …</font></p>
<p>127.0.0.1:6379&gt; <code>zrange age 0 -1</code><br>1)”sherry”<br>2)”jack”<br>3)”tom”<br>4)”mary”</p>
<p>127.0.0.1:6379&gt; <code>zrem age sherry</code><br>(integer) 1<br>127.0.0.1:6379&gt; <code>zrange age 0 -1</code><br>1)”jack”<br>2)”tom”<br>3)”mary”</p>
<h3 id="zcard"><a href="#zcard" class="headerlink" title="zcard"></a>zcard</h3><p>查看集合里的元素个数</p>
<p><font color="#dd0000">zcard key</font></p>
<p>127.0.0.1:6379&gt; <code>zcard age</code><br>(integer) 3</p>
<h3 id="zremrangebyrank"><a href="#zremrangebyrank" class="headerlink" title="zremrangebyrank"></a>zremrangebyrank</h3><p>根据排名来删除元素</p>
<p><font color="#dd0000">zremrangebyrank key start end</font></p>
<p>127.0.0.1:6379&gt; <code>zrange age 0 -1 withscores</code><br> 1)”aa”<br> 2)”1”<br> 3)”bb”<br> 4)”2”<br> 5)”jack”<br> 6)”8”<br> 7)”tom”<br> 8)”11”<br> 9)”mary”<br>10)”22”<br>127.0.0.1:6379&gt; <code>zremrangebyrank age 0 1</code><br>(integer) 2<br>127.0.0.1:6379&gt; <code>zrange age 0 -1 withscores</code><br>1)”jack”<br>2)”8”<br>3)”tom”<br>4)”11”<br>5)”mary”<br>6)”22”</p>
<h3 id="zremrangebyscore"><a href="#zremrangebyscore" class="headerlink" title="zremrangebyscore"></a>zremrangebyscore</h3><p>根据数值范围来删除元素（包含）</p>
<p><font color="#dd0000">zremrangebyscore key min max</font></p>
<p>127.0.0.1:6379&gt; <code>zrange age 0 -1 withscores</code><br> 1)”aa”<br> 2)”1”<br> 3)”bb”<br> 4)”2”<br> 5)”jack”<br> 6)”8”<br> 7)”tom”<br> 8)”11”<br> 9)”mary”<br>10)”22”<br>127.0.0.1:6379&gt; <code>zremrangebyscore age 0 4</code><br>(integer) 2<br>127.0.0.1:6379&gt; <code>zrange age 0 -1 withscores</code><br>1)”jack”<br>2)”8”<br>3)”tom”<br>4)”11”<br>5)”mary”<br>6)”22”</p>
<h3 id="zrangebyscore"><a href="#zrangebyscore" class="headerlink" title="zrangebyscore"></a>zrangebyscore</h3><h4 id="根据评分范围来查找元素"><a href="#根据评分范围来查找元素" class="headerlink" title="根据评分范围来查找元素"></a>根据评分范围来查找元素</h4><p><font color="#dd0000">zrangebyscore key min max withscores</font></p>
<p>127.0.0.1:6379&gt; <code>zrange age 0 -1 withscores</code><br>1)”jack”<br>2)”8”<br>3)”tom”<br>4)”11”<br>5)”mary”<br>6)”22”<br>127.0.0.1:6379&gt; <code>zrangebyscore age 8 11 withscores</code><br>1)”jack”<br>2)”8”<br>3)”tom”<br>4)”11”</p>
<h4 id="限定查找起始"><a href="#限定查找起始" class="headerlink" title="限定查找起始"></a>限定查找起始</h4><p>第一个元素的下标为0，end为-1时查全部</p>
<p><font color="#dd0000">zrangebyscore key min max withscores limit statr end</font></p>
<p>127.0.0.1:6379&gt; <code>zrangebyscore age 0 100 withscores limit 0 2</code><br>1)”jack”<br>2)”8”<br>3)”tom”<br>4)”11”</p>
<h3 id="zincrby"><a href="#zincrby" class="headerlink" title="zincrby"></a>zincrby</h3><p>给指定元素加分</p>
<p><font color="#dd0000">zincrby key 数值 字段名</font></p>
<p>127.0.0.1:6379&gt; <code>zrange age 0 -1 withscores</code><br>1)”jack”<br>2)”8”<br>3)”tom”<br>4)”11”<br>5)”mary”<br>6)”22”<br>127.0.0.1:6379&gt; <code>zincrby age 2 jack</code><br>“10”<br>127.0.0.1:6379&gt; <code>zrange age 0 -1 withscores</code><br>1)”jack”<br>2)”10”<br>3)”tom”<br>4)”11”<br>5)”mary”<br>6)”22”</p>
<h3 id="zcount"><a href="#zcount" class="headerlink" title="zcount"></a>zcount</h3><p>查找指定数值范围的元素个数</p>
<p><font color="#dd0000">zcount key min max</font></p>
<p>127.0.0.1:6379&gt; zrange age 0 -1 withscores<br>1)”jack”<br>2)”10”<br>3)”tom”<br>4)”11”<br>5)”mary”<br>6)”22”<br>127.0.0.1:6379&gt; zcount age 9 10<br>(integer) 1</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.zoutl.cn/169.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image.zoutl.cn/hexo-blog/images/logo.png">
      <meta itemprop="name" content="LeDao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeDao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/169.html" class="post-title-link" itemprop="url">Redis集合(Set)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-21 08:05:35" itemprop="dateCreated datePublished" datetime="2021-06-21T08:05:35+08:00">2021-06-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-26 04:00:47" itemprop="dateModified" datetime="2022-04-26T04:00:47+08:00">2022-04-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>Redis 的 Set 是 String 类型的无序集合。集合成员是唯一的，这就意味着集合中不能出现重复的数据。</p>
<p>Redis 中集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)。</p>
<p>集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。</p>
<h3 id="sadd"><a href="#sadd" class="headerlink" title="sadd"></a>sadd</h3><p>添加set元素（添加一个或多个），set集合如果不存在就会先创建集合</p>
<p><font color="#dd0000">sadd key member1 member2…</font></p>
<p>127.0.0.1:6379&gt; <code>sadd set1 a b c a</code><br>(integer) 3</p>
<h3 id="smembers"><a href="#smembers" class="headerlink" title="smembers"></a>smembers</h3><p>查看指定key集合元素</p>
<p><font color="#dd0000">smembers key</font></p>
<p>127.0.0.1:6379&gt; <code>smembers set1</code><br>1)”b”<br>2)”a”<br>3)”c”</p>
<h3 id="srem"><a href="#srem" class="headerlink" title="srem"></a>srem</h3><p>删除元素（删除一个或多个元素）</p>
<p><font color="#dd0000">srem key member1 member2…</font></p>
<p>127.0.0.1:6379&gt; <code>smembers set1</code><br>1)”1”<br>2)”c”<br>3)”a”<br>4)”b”<br>5)”3”<br>6)”2”<br>127.0.0.1:6379&gt; <code>srem set1 a 1</code><br>(integer) 2<br>127.0.0.1:6379&gt; <code>smembers set1</code><br>1)”b”<br>2)”c”<br>3)”3”<br>4)”2”</p>
<h3 id="sismember"><a href="#sismember" class="headerlink" title="sismember"></a>sismember</h3><p>判断某个元素是否存在（返回1表示存在，返回0表示不存在）</p>
<p><font color="#dd0000">sismember key member</font></p>
<p>127.0.0.1:6379&gt; <code>smembers set1</code><br>1)”b”<br>2)”c”<br>3)”3”<br>4)”2”<br>127.0.0.1:6379&gt; <code>sismember set1 a</code><br>(integer) 0<br>127.0.0.1:6379&gt; <code>sismember set1 2</code><br>(integer) 1</p>
<h3 id="sdiff"><a href="#sdiff" class="headerlink" title="sdiff"></a>sdiff</h3><p>计算两个集合的差集（key1去掉key1和key2的交集元素，key1和key2的位置交换会得到不同的结果）</p>
<p><font color="#dd0000">sdiff key1 key2</font></p>
<p>127.0.0.1:6379&gt; <code>sadd set2 a b c</code><br>(integer) 3<br>127.0.0.1:6379&gt; <code>sadd set3 b c d e</code><br>(integer) 4<br>127.0.0.1:6379&gt; <code>sdiff set2 set3</code><br>1)”a”<br>127.0.0.1:6379&gt; <code>sdiff set3 set2</code><br>1)”d”<br>2)”e”</p>
<h3 id="sinter"><a href="#sinter" class="headerlink" title="sinter"></a>sinter</h3><p>计算两个集合的交集</p>
<p><font color="#dd0000">sinter key1 key2</font></p>
<p>127.0.0.1:6379&gt; <code>sinter set2 set3</code><br>1)”b”<br>2)”c”</p>
<h3 id="sunion"><a href="#sunion" class="headerlink" title="sunion"></a>sunion</h3><p>计算两个集合的并集</p>
<p><font color="#dd0000">sunion key1 key2</font></p>
<p>127.0.0.1:6379&gt; <code>sunion set2 set3</code><br>1)”b”<br>2)”a”<br>3)”c”<br>4)”e”<br>5)”d”</p>
<h3 id="scard"><a href="#scard" class="headerlink" title="scard"></a>scard</h3><p>计算元素总数</p>
<p><font color="#dd0000">scard key</font></p>
<p>127.0.0.1:6379&gt; <code>smembers set1</code><br>1)”b”<br>2)”c”<br>3)”3”<br>4)”2”<br>127.0.0.1:6379&gt; <code>scard set1</code><br>(integer) 4</p>
<h3 id="srandmember"><a href="#srandmember" class="headerlink" title="srandmember"></a>srandmember</h3><p>随机取一个或多个元素，count为空或者是1时，只随机选一个元素</p>
<p><font color="#dd0000">srandmember key count</font></p>
<p>127.0.0.1:6379&gt; <code>srandmember set1</code><br>“3”<br>127.0.0.1:6379&gt; <code>srandmember set1</code><br>“b”<br>127.0.0.1:6379&gt; <code>srandmember set1 2</code><br>1)”b”<br>2)”3”<br>127.0.0.1:6379&gt; <code>srandmember set1 2</code><br>1)”3”<br>2)”2”</p>
<h3 id="sdiffstore"><a href="#sdiffstore" class="headerlink" title="sdiffstore"></a>sdiffstore</h3><p>把差集结果存储到新集合中</p>
<p><font color="#dd0000">sdiffstore newKey key1 key2</font></p>
<p>127.0.0.1:6379&gt; <code>smembers set2</code><br>1)”b”<br>2)”a”<br>3)”c”<br>127.0.0.1:6379&gt; <code>smembers set3</code><br>1)”d”<br>2)”b”<br>3)”e”<br>4)”c”<br>127.0.0.1:6379&gt; <code>sdiffstore newSet set2 set3</code><br>(integer) 1<br>127.0.0.1:6379&gt; <code>smembers newSet</code><br>1)”a”</p>
<h3 id="sinterstore"><a href="#sinterstore" class="headerlink" title="sinterstore"></a>sinterstore</h3><p>把交集结果存储到新集合中</p>
<p><font color="#dd0000">sinterstore newKey key1 key2</font></p>
<p>127.0.0.1:6379&gt; <code>smembers set2</code><br>1)”b”<br>2)”a”<br>3)”c”<br>127.0.0.1:6379&gt; <code>smembers set3</code><br>1)”d”<br>2)”b”<br>3)”e”<br>4)”c”<br>127.0.0.1:6379&gt; <code>sinterstore newSet set2 set3</code><br>(integer) 2<br>127.0.0.1:6379&gt; <code>smembers newSet</code><br>1)”b”<br>2)”c”</p>
<h3 id="sunionstore"><a href="#sunionstore" class="headerlink" title="sunionstore"></a>sunionstore</h3><p>把并集结果存储到新集合中</p>
<p><font color="#dd0000">sunionstore newKey key1 key2</font></p>
<p>127.0.0.1:6379&gt; <code>smembers set2</code><br>1)”b”<br>2)”a”<br>3)”c”<br>127.0.0.1:6379&gt; <code>smembers set3</code><br>1)”d”<br>2)”b”<br>3)”e”<br>4)”c”<br>127.0.0.1:6379&gt; <code>sunionstore newSet set2 set3</code><br>(integer) 5<br>127.0.0.1:6379&gt; <code>smembers newSet</code><br>1)”b”<br>2)”a”<br>3)”c”<br>4)”e”<br>5)”d”</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.zoutl.cn/168.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image.zoutl.cn/hexo-blog/images/logo.png">
      <meta itemprop="name" content="LeDao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeDao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/168.html" class="post-title-link" itemprop="url">Redis结合JSON存储Java对象</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-20 23:44:11" itemprop="dateCreated datePublished" datetime="2021-06-20T23:44:11+08:00">2021-06-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-26 04:00:50" itemprop="dateModified" datetime="2022-04-26T04:00:50+08:00">2022-04-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>先将Java对象转化成json字符串，然后Redis存储json字符串</p>
<h3 id="实现过程"><a href="#实现过程" class="headerlink" title="实现过程"></a>实现过程</h3><h4 id="引入gson依赖"><a href="#引入gson依赖" class="headerlink" title="引入gson依赖"></a>引入gson依赖</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="使用到的方法"><a href="#使用到的方法" class="headerlink" title="使用到的方法"></a>使用到的方法</h4><p><strong>Jedis.rpop()</strong></p>
<p>右侧弹出元素</p>
<p><strong>Jedis.llen()</strong></p>
<p>获取Redis的list长度</p>
<p><strong>Jedis.rpush()</strong></p>
<p>从右侧开始添加元素</p>
<p><strong>Jedis.lrange()</strong></p>
<p>获取全部元素集合</p>
<p><strong>Gson.toJson()</strong></p>
<p>Java对象转化成json</p>
<p><strong>Gson.fromJson()</strong></p>
<p>json转化成Java对象</p>
<h4 id="Java代码"><a href="#Java代码" class="headerlink" title="Java代码"></a>Java代码</h4><blockquote>
<p>Fruit实体类</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ledao.jedis;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LeDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@company</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-20 22:30</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fruit</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 编号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数量</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Integer num;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Fruit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Fruit</span><span class="params">(String name, Integer num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.num = num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Fruit</span><span class="params">(Integer id, String name, Integer num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.num = num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNum</span><span class="params">(Integer num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.num = num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Fruit&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, num=&quot;</span> + num +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>测试代码</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ledao.jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LeDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@company</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-20 7:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">&quot;192.168.0.153&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        jedis.auth(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        Fruit fruit1 = <span class="keyword">new</span> Fruit(<span class="number">1</span>, <span class="string">&quot;苹果&quot;</span>, <span class="number">11</span>);</span><br><span class="line">        Fruit fruit2 = <span class="keyword">new</span> Fruit(<span class="number">2</span>, <span class="string">&quot;梨&quot;</span>, <span class="number">6</span>);</span><br><span class="line">        Fruit fruit3 = <span class="keyword">new</span> Fruit(<span class="number">3</span>, <span class="string">&quot;油桃&quot;</span>, <span class="number">8</span>);</span><br><span class="line">        List&lt;Fruit&gt; fruitList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        fruitList.add(fruit1);</span><br><span class="line">        fruitList.add(fruit2);</span><br><span class="line">        fruitList.add(fruit3);</span><br><span class="line">        <span class="comment">//转化成json，便于redis存储Java对象</span></span><br><span class="line">        System.out.println(<span class="string">&quot;转化成json：&quot;</span>);</span><br><span class="line">        Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">        <span class="keyword">for</span> (Fruit fruit : fruitList) &#123;</span><br><span class="line">            jedis.rpush(<span class="string">&quot;redisFruitList&quot;</span>, gson.toJson(fruit));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//遍历</span></span><br><span class="line">        List&lt;String&gt; redisFruitList = jedis.lrange(<span class="string">&quot;redisFruitList&quot;</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s : redisFruitList) &#123;</span><br><span class="line">            System.out.println(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Redis的list转化成Java对象</span></span><br><span class="line">        System.out.println(<span class="string">&quot;转化成Java对象：&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; redisFruitList.size(); i++) &#123;</span><br><span class="line">            Fruit fruit = gson.fromJson(redisFruitList.get(i), Fruit.class);</span><br><span class="line">            System.out.println(fruit.toString());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//清空redisFruitList</span></span><br><span class="line">        Long length = jedis.llen(<span class="string">&quot;redisFruitList&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">                jedis.rpop(<span class="string">&quot;redisFruitList&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//关闭连接</span></span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h4><p><img src="https://image.zoutl.cn/hexo-blog/blogImage/20210621074556.jpg" alt="img"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.zoutl.cn/167.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image.zoutl.cn/hexo-blog/images/logo.png">
      <meta itemprop="name" content="LeDao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeDao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/167.html" class="post-title-link" itemprop="url">Redis列表(List)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-20 21:54:34" itemprop="dateCreated datePublished" datetime="2021-06-20T21:54:34+08:00">2021-06-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-26 04:00:53" itemprop="dateModified" datetime="2022-04-26T04:00:53+08:00">2022-04-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="lpush"><a href="#lpush" class="headerlink" title="lpush"></a>lpush</h3><p>方式添加，从左边开始添加</p>
<p><font color="#dd0000">lpush key value1 value2…</font></p>
<p>127.0.0.1:6379&gt; <code>lpush l1 a b c d</code><br>(integer) 4<br>127.0.0.1:6379&gt; <code>lpush l1 1 2 3 4</code><br>(integer) 8</p>
<h3 id="rpush"><a href="#rpush" class="headerlink" title="rpush"></a>rpush</h3><p>从右端开始添加（一般人比较习惯这种方式）</p>
<p><font color="#dd0000">rpush key value1 value2…</font></p>
<p>127.0.0.1:6379&gt; <code>rpush l2 a b c d</code><br>(integer) 4<br>127.0.0.1:6379&gt; <code>rpush l2 1 2 3 4</code><br>(integer) 8<br>127.0.0.1:6379&gt; <code>lrange l2 0 -1</code><br>1)”a”<br>2)”b”<br>3)”c”<br>4)”d”<br>5)”1”<br>6)”2”<br>7)”3”<br>8)”4”</p>
<h3 id="lrange"><a href="#lrange" class="headerlink" title="lrange"></a>lrange</h3><p>获取指定方位的集合元素（end是-1时表示最后一个位置）</p>
<p><font color="#dd0000">lrange key start end</font></p>
<p>127.0.0.1:6379&gt; <code>lrange l1 0 -1</code><br>1)”4”<br>2)”3”<br>3)”2”<br>4)”1”<br>5)”d”<br>6)”c”<br>7)”b”<br>8)”a”</p>
<h3 id="lpop"><a href="#lpop" class="headerlink" title="lpop"></a>lpop</h3><p>左侧弹出集合元素，返回弹出的元素</p>
<p><font color="#dd0000">lpop/rpop key</font></p>
<p>127.0.0.1:6379&gt; <code>lrange l2 0 -1</code><br>1)”a”<br>2)”b”<br>3)”c”<br>4)”d”<br>5)”1”<br>6)”2”<br>7)”3”<br>8)”4”<br>128.127.0.0.1:6379&gt; <code>lpop l2</code><br>“a”<br>127.0.0.1:6379&gt; <code>lrange l2 0 -1</code><br>1)”b”<br>2)”c”<br>3)”d”<br>4)”1”<br>5)”2”<br>6)”3”<br>7)”4”</p>
<h3 id="rpop"><a href="#rpop" class="headerlink" title="rpop"></a>rpop</h3><p>右侧弹出集合元素，返回弹出的元素</p>
<p>127.0.0.1:6379&gt; <code>lrange l2 0 -1</code><br>1)”b”<br>2)”c”<br>3)”d”<br>4)”1”<br>5)”2”<br>6)”3”<br>7)”4”</p>
<p>128.127.0.0.1:6379&gt; <code>rpop l2</code><br>“4”<br>127.0.0.1:6379&gt; <code>lrange l2 0 -1</code><br>1)”b”<br>2)”c”<br>3)”d”<br>4)”1”<br>5)”2”<br>6)”3”</p>
<h3 id="llen"><a href="#llen" class="headerlink" title="llen"></a>llen</h3><p>查看元素个数</p>
<p><font color="#dd0000">llen key</font></p>
<p>127.0.0.1:6379&gt; <code>lrange l2 0 -1</code><br>1)”b”<br>2)”c”<br>3)”d”<br>4)”1”<br>5)”2”<br>6)”3”<br>127.0.0.1:6379&gt; <code>llen l2</code><br>(integer) 6</p>
<h3 id="lset"><a href="#lset" class="headerlink" title="lset"></a>lset</h3><p>重新设置集合指定索引的值（即修改）</p>
<p><font color="#dd0000">lset key index value</font></p>
<p>127.0.0.1:6379&gt; <code>lrange l2 0 -1</code><br>1)”b”<br>2)”c”<br>3)”d”<br>4)”1”<br>5)”2”<br>6)”3”<br>127.0.0.1:6379&gt; <code>lset l2 0 b1</code><br>OK<br>127.0.0.1:6379&gt; <code>lrange l2 0 -1</code><br>1)”b1”<br>2)”c”<br>3)”d”<br>4)”1”<br>5)”2”<br>6)”3”</p>
<h3 id="linsert"><a href="#linsert" class="headerlink" title="linsert"></a>linsert</h3><p>在集合里插入指定元素</p>
<p>在某元素之前插入一个元素（在某元素之后插入一个元素只要将before修改为after即可）</p>
<p><font color="#dd0000">linsert key before 某元素 插入的元素</font></p>
<p>127.0.0.1:6379&gt; <code>lrange l2 0 -1</code><br>1)”b1”<br>2)”c”<br>3)”d”<br>4)”1”<br>5)”2”<br>6)”3”<br>127.0.0.1:6379&gt; <code>linsert l2 before 1 0</code><br>(integer) 7<br>127.0.0.1:6379&gt; <code>lrange l2 0 -1</code><br>1)”b1”<br>2)”c”<br>3)”d”<br>4)”0”<br>5)”1”<br>6)”2”<br>7)”3”</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.zoutl.cn/166.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image.zoutl.cn/hexo-blog/images/logo.png">
      <meta itemprop="name" content="LeDao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeDao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/166.html" class="post-title-link" itemprop="url">Redis哈希(Hash)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-20 12:20:59" itemprop="dateCreated datePublished" datetime="2021-06-20T12:20:59+08:00">2021-06-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-26 04:00:56" itemprop="dateModified" datetime="2022-04-26T04:00:56+08:00">2022-04-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>Redis hash 是一个 string 类型的 field（字段） 和 value（值） 的映射表，hash 特别适合用于存储对象。</p>
<p>Redis 中每个 hash 可以存储 232 - 1 键值对（40多亿）。</p>
<h3 id="hset"><a href="#hset" class="headerlink" title="hset"></a>hset</h3><p>为单个字段设置值</p>
<p><font color="#dd0000">hset key 字段名 值</font></p>
<p>127.0.0.1:6379&gt; <code>hset h1 username root</code><br>(integer) 1<br>127.0.0.1:6379&gt; <code>hset h1 password 123456</code><br>(integer) 1</p>
<h3 id="hget"><a href="#hget" class="headerlink" title="hget"></a>hget</h3><p>获取字段的值</p>
<p><font color="#dd0000">hget key 字段名</font></p>
<p>127.0.0.1:6379&gt; <code>hget h1 username</code><br>“root”<br>127.0.0.1:6379&gt; <code>hget h1 password</code><br>“123456”</p>
<h3 id="hmset"><a href="#hmset" class="headerlink" title="hmset"></a>hmset</h3><p>为多个字段一起设置值</p>
<p><font color="#dd0000">hmset key 字段名1 值 字段名2 值 …</font></p>
<p>127.0.0.1:6379&gt; <code>hmset h2 username ledao password 333</code><br>OK</p>
<h3 id="hmget"><a href="#hmget" class="headerlink" title="hmget"></a>hmget</h3><p>获取多个字段的值</p>
<p><font color="#dd0000">hmget key 字段名1 字段名2 …</font></p>
<p>127.0.0.1:6379&gt; <code>hmget h2 username password</code><br>1)”ledao”<br>2)”333”</p>
<h3 id="hgetall"><a href="#hgetall" class="headerlink" title="hgetall"></a>hgetall</h3><p>获取全部字段的值</p>
<p><font color="#dd0000">hgetall key</font></p>
<p>127.0.0.1:6379&gt; <code>hgetall h2</code><br>1)”username”<br>2)”ledao”<br>3)”password”<br>4)”333”</p>
<h3 id="hdel"><a href="#hdel" class="headerlink" title="hdel"></a>hdel</h3><p>删除属性，可以一次删除一个或者多个</p>
<p><font color="#dd0000">hdel key 字段名1 字段名2 …</font></p>
<p>127.0.0.1:6379&gt; <code>hdel h2 username password</code><br>(integer) 2<br>127.0.0.1:6379&gt; <code>hgetall h2</code><br>(empty list or set)</p>
<h3 id="hincrby"><a href="#hincrby" class="headerlink" title="hincrby"></a>hincrby</h3><p>给字段的值加一个数，这个字段的值的数据类型要为integer</p>
<p><font color="#dd0000">hincrby key 字段名 数值</font></p>
<p>127.0.0.1:6379&gt; <code>hset h1 age 20</code><br>(integer) 1<br>127.0.0.1:6379&gt; <code>hgetall h1</code><br>1)”username”<br>2)”root”<br>3)”password”<br>4)”123456”<br>5)”age”<br>6)”20”<br>127.0.0.1:6379&gt; <code>hincrby h1 age 5</code><br>(integer) 25</p>
<h3 id="hexists"><a href="#hexists" class="headerlink" title="hexists"></a>hexists</h3><p>判断字段是否存在，1表示存在，0表示不存在</p>
<p><font color="#dd0000">hexists key 字段名</font></p>
<p>127.0.0.1:6379&gt; <code>hexists h1 age</code><br>(integer) 1<br>127.0.0.1:6379&gt; <code>hexists h1 age2</code><br>(integer) 0</p>
<h3 id="hlen"><a href="#hlen" class="headerlink" title="hlen"></a>hlen</h3><p>获取hash属性个数</p>
<p><font color="#dd0000">hlen key</font></p>
<p>127.0.0.1:6379&gt; <code>hlen h1</code><br>(integer) 3</p>
<h3 id="hkeys"><a href="#hkeys" class="headerlink" title="hkeys"></a>hkeys</h3><p>获取所有属性名称</p>
<p><font color="#dd0000">hkeys key</font></p>
<p>127.0.0.1:6379&gt; <code>hkeys h1</code><br>1)”username”<br>2)”password”<br>3)”age”</p>
<h3 id="hvals"><a href="#hvals" class="headerlink" title="hvals"></a>hvals</h3><p>获取所有属性值</p>
<p><font color="#dd0000">hvals key</font></p>
<p>127.0.0.1:6379&gt; <code>hvals h1</code><br>1)”root”<br>2)”123456”<br>3)”25”</p>
<h3 id="Java代码"><a href="#Java代码" class="headerlink" title="Java代码"></a><strong>Java代码</strong></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ledao.jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LeDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@company</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-20 7:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">&quot;192.168.0.153&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        jedis.auth(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">//设置字段</span></span><br><span class="line">        jedis.hset(<span class="string">&quot;h1&quot;</span>, <span class="string">&quot;username&quot;</span>, <span class="string">&quot;root&quot;</span>);</span><br><span class="line">        jedis.hset(<span class="string">&quot;h1&quot;</span>, <span class="string">&quot;password&quot;</span>, <span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;用户名：&quot;</span> + jedis.hget(<span class="string">&quot;h1&quot;</span>, <span class="string">&quot;username&quot;</span>) + <span class="string">&quot;，密码：&quot;</span> + jedis.hget(<span class="string">&quot;h1&quot;</span>, <span class="string">&quot;password&quot;</span>));</span><br><span class="line">        <span class="comment">//获取全部字段</span></span><br><span class="line">        Map&lt;String, String&gt; map=jedis.hgetAll(<span class="string">&quot;h1&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, String&gt; stringStringEntry : map.entrySet()) &#123;</span><br><span class="line">            System.out.println(stringStringEntry.getKey()+<span class="string">&quot;:&quot;</span>+stringStringEntry.getValue());</span><br><span class="line">        &#125;</span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><img src="https://image.zoutl.cn/hexo-blog/blogImage/20210620134006.jpg" alt="img"></strong></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.zoutl.cn/165.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image.zoutl.cn/hexo-blog/images/logo.png">
      <meta itemprop="name" content="LeDao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeDao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/165.html" class="post-title-link" itemprop="url">Redis keys命令</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-20 11:38:38" itemprop="dateCreated datePublished" datetime="2021-06-20T11:38:38+08:00">2021-06-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-26 04:00:59" itemprop="dateModified" datetime="2022-04-26T04:00:59+08:00">2022-04-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><p>获取指定 key 的值</p>
<p><font color="#dd0000">get key</font></p>
<p>127.0.0.1:6379&gt; <code>get name</code><br>“ledao”</p>
<h3 id="del"><a href="#del" class="headerlink" title="del"></a>del</h3><p>删除指定key</p>
<p><font color="#dd0000">del key</font></p>
<p>127.0.0.1:6379&gt; <code>get num</code><br>“1”<br>127.0.0.1:6379&gt; <code>del num</code><br>(integer) 1<br>127.0.0.1:6379&gt; <code>get num</code><br>(nil)</p>
<h3 id="exists"><a href="#exists" class="headerlink" title="exists"></a>exists</h3><p>检查给定 key 是否存在</p>
<p><font color="#dd0000">exists key</font></p>
<p>127.0.0.1:6379&gt; <code>exists name</code><br>(integer) 1</p>
<h3 id="type"><a href="#type" class="headerlink" title="type"></a>type</h3><p>返回 key 所储存的值的类型删除指定key</p>
<p><font color="#dd0000">type key</font></p>
<p>127.0.0.1:6379&gt; <code>type name</code><br>string</p>
<h3 id="keys"><a href="#keys" class="headerlink" title="keys"></a>keys</h3><h4 id="keys-1"><a href="#keys-1" class="headerlink" title="keys *"></a>keys *</h4><p>显示所有key</p>
<p>127.0.0.1:6379&gt; <code>keys *</code><br>1)”set3”<br>2)”age”<br>3)”l1”<br>4)”newSet”<br>5)”l2”<br>6)”set1”<br>7)”1”<br>8)”fruitList”<br>9)”set2”</p>
<h4 id="keys-f"><a href="#keys-f" class="headerlink" title="keys f*"></a>keys f*</h4><p>查找所有以某字符串开头的key</p>
<p>127.0.0.1:6379&gt; <code>keys f*</code><br>1)”fruitList”</p>
<h3 id="rename"><a href="#rename" class="headerlink" title="rename"></a>rename</h3><p>重命名key</p>
<p><font color="#dd0000">rename key name</font></p>
<p>127.0.0.1:6379&gt; <code>rename list1 list2</code><br>OK</p>
<h3 id="PS"><a href="#PS" class="headerlink" title="PS."></a><strong>PS.</strong></h3><p>更多命令：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/redis/redis-keys.html">https://www.runoob.com/redis/redis-keys.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.zoutl.cn/164.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image.zoutl.cn/hexo-blog/images/logo.png">
      <meta itemprop="name" content="LeDao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeDao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/164.html" class="post-title-link" itemprop="url">Redis字符串</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-20 10:46:12" itemprop="dateCreated datePublished" datetime="2021-06-20T10:46:12+08:00">2021-06-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-26 04:01:02" itemprop="dateModified" datetime="2022-04-26T04:01:02+08:00">2022-04-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><p>获取指定key的值</p>
<p><font color="#dd0000">get key</font></p>
<p>127.0.0.1:6379&gt; get name<br>“ledao”</p>
<h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><p>设置指定key的值（如果key不存在就新建并复制，存在则值覆盖）</p>
<p><font color="#dd0000">set key 值</font></p>
<p>127.0.0.1:6379&gt; <code>set name ledao</code><br>OK<br>127.0.0.1:6379&gt; <code>get name</code><br>“ledao”<br>127.0.0.1:6379&gt; <code>set name ledao333</code><br>OK<br>127.0.0.1:6379&gt; <code>get name</code><br>“ledao333”</p>
<h3 id="del"><a href="#del" class="headerlink" title="del"></a>del</h3><p>删除指定key，删除一个或多个</p>
<p><font color="#dd0000">del key1 key2 …</font></p>
<p>127.0.0.1:6379&gt; <code>get num</code><br>“1”<br>127.0.0.1:6379&gt; <code>del num</code><br>(integer) 1<br>127.0.0.1:6379&gt; <code>get num</code><br>(nil)</p>
<h3 id="getrange"><a href="#getrange" class="headerlink" title="getrange"></a>getrange</h3><p>返回 key 中字符串值的子字符（包括头包括尾，下标从0开始计算）</p>
<p><font color="#dd0000">getrange key 开始位置 结束位置</font></p>
<p>127.0.0.1:6379&gt; <code>set name ledao333</code><br>OK<br>127.0.0.1:6379&gt; <code>get name</code><br>“ledao333”<br>127.0.0.1:6379&gt; <code>getrange name 0 1</code><br>“le”</p>
<h3 id="getset"><a href="#getset" class="headerlink" title="getset"></a>getset</h3><p>设置给定 key 的值，并返回 key 的旧值</p>
<p><font color="#dd0000">getset key 值</font></p>
<p>127.0.0.1:6379&gt; <code>getset name LeDao</code><br>“ledao333”<br>127.0.0.1:6379&gt; <code>get name</code><br>“LeDao”</p>
<h3 id="setnx"><a href="#setnx" class="headerlink" title="setnx"></a>setnx</h3><p>只有在 key 不存在时设置 key 的值</p>
<p><font color="#dd0000">setnx key 值</font></p>
<p>127.0.0.1:6379&gt; <code>get name</code><br>“LeDao”<br>127.0.0.1:6379&gt; <code>setnx name ledao</code><br>(integer) 0<br>127.0.0.1:6379&gt; <code>get name</code><br>“LeDao”</p>
<h3 id="strlen"><a href="#strlen" class="headerlink" title="strlen"></a>strlen</h3><p>返回 key 所储存的字符串值的长度</p>
<p><font color="#dd0000">strlen key</font></p>
<p>127.0.0.1:6379&gt; <code>get name</code><br>“LeDao”<br>127.0.0.1:6379&gt; <code>strlen name</code><br>(integer) 5</p>
<h3 id="mset"><a href="#mset" class="headerlink" title="mset"></a>mset</h3><p>同时设置一个或多个 key-value 对</p>
<p><font color="#dd0000">mset key1 值 key2 值 …</font></p>
<p>127.0.0.1:6379&gt; <code>mset name1 ledao1 name2 ledao2</code><br>OK<br>127.0.0.1:6379&gt; <code>get name1</code><br>“ledao1”<br>127.0.0.1:6379&gt; <code>get name2</code><br>“ledao2”</p>
<h3 id="incr"><a href="#incr" class="headerlink" title="incr"></a>incr</h3><p>将 key 中储存的数字值增一</p>
<p><font color="#dd0000">incr key</font></p>
<p>127.0.0.1:6379&gt; <code>set num 0</code><br>OK<br>127.0.0.1:6379&gt; <code>get num</code><br>“0”<br>127.0.0.1:6379&gt; <code>incr num</code><br>(integer) 1<br>127.0.0.1:6379&gt; <code>get num</code><br>“1”</p>
<h3 id="decr"><a href="#decr" class="headerlink" title="decr"></a>decr</h3><p>将 key 中储存的数字值减一</p>
<p><font color="#dd0000">decr key</font></p>
<p>127.0.0.1:6379&gt; <code>get num</code><br>“2”<br>127.0.0.1:6379&gt; <code>decr num</code><br>(integer) 1<br>127.0.0.1:6379&gt; <code>get num</code><br>“1”</p>
<h3 id="append"><a href="#append" class="headerlink" title="append"></a>append</h3><p>如果 key 已经存在并且是一个字符串， APPEND 命令将指定的 value 追加到该 key 原来值（value）的末尾，如果不存在就相当于set key value</p>
<p><font color="#dd0000">append key 值</font></p>
<p>127.0.0.1:6379&gt; <code>get name</code><br>“LeDao”<br>127.0.0.1:6379&gt; <code>append name 666</code><br>(integer) 8<br>127.0.0.1:6379&gt; <code>get name</code><br>“LeDao666”<br>127.0.0.1:6379&gt; <code>get name4</code><br>(nil)<br>127.0.0.1:6379&gt; <code>append name4 666</code><br>(integer) 3<br>127.0.0.1:6379&gt; <code>get name4</code><br>“666”</p>
<h3 id="Java代码："><a href="#Java代码：" class="headerlink" title="Java代码："></a>Java代码：</h3><p>请先设置Redis的连接密码，查看博客：<a href="https://blog.zoutl.cn/161.html">实现Jedis连接 | LeDao的博客 (zoutl.cn)</a> ，在第4点的第②小点</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ledao.jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LeDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@company</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-20 7:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">&quot;192.168.0.153&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        jedis.auth(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        jedis.set(<span class="string">&quot;LeDao的博客&quot;</span>, <span class="string">&quot;http://www.zoutl.cn&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;LeDao的博客网址：&quot;</span>+jedis.get(<span class="string">&quot;LeDao的博客&quot;</span>));</span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://image.zoutl.cn/hexo-blog/blogImage/20210620110136.jpg" alt="img"></p>
<h3 id="PS"><a href="#PS" class="headerlink" title="PS."></a><strong>PS.</strong></h3><p>更多命令：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/redis/redis-strings.html">https://www.runoob.com/redis/redis-strings.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.zoutl.cn/163.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image.zoutl.cn/hexo-blog/images/logo.png">
      <meta itemprop="name" content="LeDao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeDao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/163.html" class="post-title-link" itemprop="url">CentOS7关闭Redis的两种方法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-20 09:42:47" itemprop="dateCreated datePublished" datetime="2021-06-20T09:42:47+08:00">2021-06-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-26 04:01:06" itemprop="dateModified" datetime="2022-04-26T04:01:06+08:00">2022-04-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="使用Linux命令"><a href="#使用Linux命令" class="headerlink" title="使用Linux命令"></a>使用Linux命令</h3><p>如果设置了连接密码，就不能使用此方法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/redis/bin/redis-cli shutdown</span><br></pre></td></tr></table></figure>

<h3 id="使用Redis命令"><a href="#使用Redis命令" class="headerlink" title="使用Redis命令"></a>使用Redis命令</h3><p>先进入Redis客户端</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/redis/bin/redis-cli </span><br></pre></td></tr></table></figure>

<p>进入客户端后输入<code>shutdown</code>关闭Redis服务，然后按ctrl+c退出</p>
<h3 id="PS"><a href="#PS" class="headerlink" title="PS."></a>PS.</h3><p>查看Redis服务是否开启（有端口号说明Redis服务已经启动，没有则说明服务已停止）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep -i redis</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.zoutl.cn/162.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image.zoutl.cn/hexo-blog/images/logo.png">
      <meta itemprop="name" content="LeDao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeDao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/162.html" class="post-title-link" itemprop="url">Redis使用连接池</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-20 09:09:09" itemprop="dateCreated datePublished" datetime="2021-06-20T09:09:09+08:00">2021-06-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-04-26 04:01:09" itemprop="dateModified" datetime="2022-04-26T04:01:09+08:00">2022-04-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="池化的基本思想"><a href="#池化的基本思想" class="headerlink" title="池化的基本思想"></a>池化的基本思想</h3><ol>
<li><p>可以在初始化的时候创建一些对象，当有需要使用的时候直接从池中获取，提高响应速度；</p>
</li>
<li><p>使用过的对象不进行销毁，保存起来，等下一次需要对象的时候，拿出来重复使用，减少频繁创建对象所造成的销；</p>
</li>
<li><p>创建的对象统一保存，方面管理和维护。</p>
</li>
</ol>
<h3 id="池化好处总结"><a href="#池化好处总结" class="headerlink" title="池化好处总结"></a>池化好处总结</h3><ol>
<li><p>提高响应的速度</p>
</li>
<li><p>降低资源的消耗</p>
</li>
<li><p>方便管理和维护</p>
</li>
</ol>
<p>Jedis连接的就是连接池中JedisPool管理的资源，JedisPool保证资源在一个可控范围内，并且保障线程安全。使用合理的GenericObjectPoolConfig配置能够提升Redis的服务性能，降低资源开销。</p>
<h3 id="重要参数"><a href="#重要参数" class="headerlink" title="重要参数"></a>重要参数</h3><p>下列两表将对一些重要参数进行说明</p>
<p><img src="https://image.zoutl.cn/hexo-blog/blogImage/20210620090617.jpg" alt="img"></p>
<p>空闲Jedis对象检测由下列四个参数组合完成，testWhileIdle是该功能的开关。</p>
<p><img src="https://image.zoutl.cn/hexo-blog/blogImage/20210620090627.jpg" alt="img"></p>
<p>可以在org.apache.commons.pool2.impl.BaseObjectPoolConfig中查看全部默认值。</p>
<h3 id="关键参数设置建议"><a href="#关键参数设置建议" class="headerlink" title="关键参数设置建议"></a>关键参数设置建议</h3><h4 id="maxTotal（最大连接数）"><a href="#maxTotal（最大连接数）" class="headerlink" title="maxTotal（最大连接数）"></a>maxTotal（最大连接数）</h4><p>想合理设置maxTotal（最大连接数）需要考虑的因素较多，如：</p>
<ol>
<li>业务希望的Redis并发量</li>
<li>客户端执行命令时间</li>
<li>Redis资源，例如nodes（如应用个数等），maxTotal不能超过Redis的最大连接数</li>
<li>资源开销，例如虽然希望控制空闲连接，但又不希望因为连接池中频繁地释放和创建连接造成不必要的开销</li>
</ol>
<p>假设一次命令时间，即borrow|return resource加上Jedis执行命令 （ 含网络耗时）的平均耗时约为1ms，一个连接的QPS大约是1000，业务期望的QPS是50000，那么理论上需要的资源池大小是50000 / 1000 = 50。但事实上这只是个理论值，除此之外还要预留一些资源，所以maxTotal可以比理论值大一些。这个值不是越大越好，一方面连接太多会占用客户端和服务端资源，另一方面对于Redis这种高QPS的服务器，如果出现大命令的阻塞，即使设置再大的资源池也无济于事。</p>
<h4 id="maxIdle与minIdle"><a href="#maxIdle与minIdle" class="headerlink" title="maxIdle与minIdle"></a>maxIdle与minIdle</h4><p>maxIdle实际上才是业务需要的最大连接数，maxTotal 是为了给出余量，所以 maxIdle 不要设置得过小，否则会有new Jedis（新连接）开销，而minIdle是为了控制空闲资源检测。连接池的最佳性能是maxTotal=maxIdle，这样就避免了连接池伸缩带来的性能干扰。但如果并发量不大或者maxTotal设置过高，则会导致不必要的连接资源浪费，您可以根据实际总QPS和调用Redis的客户端规模整体评估每个节点所使用的连接池大小。</p>
<h4 id="使用监控获取合理值"><a href="#使用监控获取合理值" class="headerlink" title="使用监控获取合理值"></a>使用监控获取合理值</h4><p>在实际环境中，比较可靠的方法是通过监控来尝试获取参数的最佳值。可以考虑通过JMX等方式实现监控，从而找到合理值。</p>
<h3 id="Java代码"><a href="#Java代码" class="headerlink" title="Java代码"></a>Java代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ledao.jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPool;</span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.JedisPoolConfig;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LeDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@company</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-20 7:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        JedisPoolConfig jedisPoolConfig = <span class="keyword">new</span> JedisPoolConfig();</span><br><span class="line">        jedisPoolConfig.setMaxTotal(<span class="number">100</span>);</span><br><span class="line">        jedisPoolConfig.setMaxIdle(<span class="number">10</span>);</span><br><span class="line">        JedisPool jedisPool = <span class="keyword">new</span> JedisPool(jedisPoolConfig, <span class="string">&quot;192.168.0.153&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        Jedis jedis = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            jedis = jedisPool.getResource();</span><br><span class="line">            jedis.auth(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">            jedis.set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;LeDao&quot;</span>);</span><br><span class="line">            String value = jedis.get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">            System.out.println(value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (jedis != <span class="keyword">null</span>) &#123;</span><br><span class="line">                jedis.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (jedisPool != <span class="keyword">null</span>) &#123;</span><br><span class="line">                jedisPool.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="PS"><a href="#PS" class="headerlink" title="PS."></a>PS.</h3><p>来源：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/u010648555/article/details/103858684">掌握JedisPoolConfig参数配置，学会调优技能_阿飞云-CSDN博客</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.zoutl.cn/161.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image.zoutl.cn/hexo-blog/images/logo.png">
      <meta itemprop="name" content="LeDao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="LeDao's Blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/161.html" class="post-title-link" itemprop="url">实现Jedis连接</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-20 08:24:20" itemprop="dateCreated datePublished" datetime="2021-06-20T08:24:20+08:00">2021-06-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-01 22:32:29" itemprop="dateModified" datetime="2022-11-01T22:32:29+08:00">2022-11-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Java代码"><a href="#Java代码" class="headerlink" title="Java代码"></a>Java代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ledao.jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LeDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@company</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-20 7:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">&quot;192.168.0.153&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        jedis.set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;LeDao&quot;</span>);</span><br><span class="line">        String value = jedis.get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(value);</span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="运行代码时出现错误"><a href="#运行代码时出现错误" class="headerlink" title="运行代码时出现错误"></a>运行代码时出现错误</h3><p><img src="https://image.zoutl.cn/hexo-blog/blogImage/20210620082302.jpg" alt="img"></p>
<blockquote>
<p>代表连接超时了，我们配置下防火墙，开一个6379端口权限，<font color="#dd0000">如果是云服务器要开放6379的防火墙</font></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开端口</span></span><br><span class="line">firewall-cmd --zone=public --add-port=6379/tcp --permanent</span><br><span class="line"><span class="comment"># 重启</span></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<blockquote>
<p>修改 <code>/usr/local/redis/redis.conf</code> 配置文件，将<code>bind 127.0.0.1</code>注释掉，在前面加<code>#</code>号即可（因为这里绑定了本机）</p>
</blockquote>
<p><img src="https://image.zoutl.cn/hexo-blog/blogImage/20210620082316.jpg" alt="img"></p>
<h3 id="重启Redis服务"><a href="#重启Redis服务" class="headerlink" title="重启Redis服务"></a>重启Redis服务</h3><blockquote>
<p>重启Redis服务，再次运行Java代码</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 停止Redis服务</span></span><br><span class="line">./bin/redis-cli shutdown</span><br><span class="line"><span class="comment"># 启动Redis服务</span></span><br><span class="line">./bin/redis-server ./redis.conf</span><br></pre></td></tr></table></figure>

<blockquote>
<p>再次出现错误（下面是错误信息）</p>
</blockquote>
<p><font color="#dd0000">Exception in thread “main” redis.clients.jedis.exceptions.JedisDataException: DENIED Redis is running in protected mode because protected mode is enabled, no bind address was specified, no authentication password is requested to clients. In this mode connections are only accepted from the loopback interface. If you want to connect from external computers to Redis you may adopt one of the following solutions: 1) Just disable protected mode sending the command ‘CONFIG SET protected-mode no’ from the loopback interface by connecting to Redis from the same host the server is running, however MAKE SURE Redis is not publicly accessible from internet if you do so. Use CONFIG REWRITE to make this change permanent. 2) Alternatively you can just disable the protected mode by editing the Redis configuration file, and setting the protected mode option to ‘no’, and then restarting the server. 3) If you started the server manually just for testing, restart it with the ‘--protected-mode no’ option. 4) Setup a bind address or an authentication password. NOTE: You only need to do one of the above things in order for the server to start accepting connections from the outside.<br>   at redis.clients.jedis.Protocol.processError(Protocol.java:127)<br>   at redis.clients.jedis.Protocol.process(Protocol.java:161)<br>   at redis.clients.jedis.Protocol.read(Protocol.java:215)<br>   at redis.clients.jedis.Connection.readProtocolWithCheckingBroken(Connection.java:340)<br>   at redis.clients.jedis.Connection.getStatusCodeReply(Connection.java:239)<br>   at redis.clients.jedis.Jedis.set(Jedis.java:121)<br>   at com.ledao.jedis.JedisTest.main(JedisTest.java:14)</font></p>
<p>出现错误的原因是因为远程连接 redis，因为 redis 的自我保护，会拒绝被访问，解决办法有两种：（<font color="#dd0000">推荐使用第二种方法：设置Redis连接密码</font>）</p>
<ol>
<li><p>关闭Redis的自我保护（<font color="#dd0000">不推荐使用</font>）</p>
<p>protected-mode yes 的yes修改为<code>no</code>即可</p>
<p><img src="https://image.zoutl.cn/hexo-blog/blogImage/20210620082329.jpg" alt="img"></p>
</li>
<li><p>设置Redis连接密码，关闭Redis服务后就会失效，需要重新设置（<font color="#00dd00">推荐使用</font>）</p>
<blockquote>
<p>进入客户端</p>
</blockquote>
<p>[root@localhost redis]# <code>./bin/redis-cli</code></p>
<blockquote>
<p>设置密码</p>
</blockquote>
<p>127.0.0.1:6379&gt; <code>config set requirepass 123456</code><br>OK</p>
<blockquote>
<p>验证是否设置成功（出现OK就说明设置成功了）</p>
</blockquote>
<p>127.0.0.1:6379&gt; <code>auth 123456</code><br>OK</p>
<blockquote>
<p>退出客户端</p>
</blockquote>
<p>127.0.0.1:6379&gt; <code>quit</code></p>
</li>
</ol>
<h3 id="设置Redis密码"><a href="#设置Redis密码" class="headerlink" title="设置Redis密码"></a>设置Redis密码</h3><p>Java代码中设置Redis密码<code>jedis.auth(&quot;123456&quot;)</code>，然后再次运行</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.ledao.jedis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> LeDao</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@company</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2021-06-20 7:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Jedis jedis = <span class="keyword">new</span> Jedis(<span class="string">&quot;192.168.0.153&quot;</span>, <span class="number">6379</span>);</span><br><span class="line">        jedis.auth(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        jedis.set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;LeDao&quot;</span>);</span><br><span class="line">        String value = jedis.get(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        System.out.println(value);</span><br><span class="line">        jedis.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://image.zoutl.cn/hexo-blog/blogImage/20210620082147.jpg" alt="img"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/42/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/42/">42</a><span class="page-number current">43</span><a class="page-number" href="/page/44/">44</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/">59</a><a class="extend next" rel="next" href="/page/44/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="LeDao"
      src="https://image.zoutl.cn/hexo-blog/images/logo.png">
  <p class="site-author-name" itemprop="name">LeDao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">590</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">99</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/a6678696" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;a6678696" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:1203007469@qq.com" title="E-Mail → mailto:1203007469@qq.com" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        <div class="copyright">
  
  &copy; 2020 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heartbeat"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LeDao</span>
</div>
<div>
    <span style="text-align: left;display: inline-block;vertical-align: middle;">本网站由 </span>
	<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"><img src='https://image.zoutl.cn/hexo-blog/images/%E5%8F%88%E6%8B%8D%E4%BA%91_logo2.png' style="height: 30px;vertical-align: middle;display: inline-block;"></a>
	<span style="text-align: left;display: inline-block;vertical-align: middle;">提供CDN加速/云存储服务</span>
</div>
<div class="id111">
    <span style="text-align: left;display: inline-block;vertical-align: middle;"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://beian.miit.gov.cn/">桂ICP备20005695号 </a></span>
	<img src='https://image.zoutl.cn/hexo-blog/images/beian.png' style="vertical-align: middle;display: inline-block;">
	<span style="text-align: left;display: inline-block;vertical-align: middle;"><a target="_blank" rel="noopener external nofollow noreferrer" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=45098102000418"> 桂公网安备45098102000418号</a></span>
</div>
        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='255,51,51' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>









<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




  

  


</body>
</html>
